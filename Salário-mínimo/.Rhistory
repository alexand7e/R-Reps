filter(Ano >= 2002) %>%
group_by(Ano) %>%
summarise(SM = mean(Salário, na.rm = T))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Infl/100),
`SM acumulado` = base*cumsum(n_i))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base*cumsum(n_i))
172.75 + 172.75*sum(inflacao$n_i)
sum(inflacao$n_i)
inflacao <- read_xls("série_inflação.xls")
View(inflacao)
inflacao <- read_xls("série_inflação.xls")
names(inflacao)[] <- c("Data", "Inflação")
inflacao$Ano <- substr(inflacao$Data, 1, 4)
inflacao$Mes <- substr(inflacao$Data, 6, 7)
inflacao <- inflacao %>% filter(Mes == "01")
View(inflacao)
sum(inflacao$n_i)
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base*cumsum(n_i))
sum(inflacao$n_i)
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base*cumsum(n_i))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base+base*cumsum(n_i))
html <- read_html("https://www.bcb.gov.br/controleinflacao/historicometas")
library(rvest)
html <- read_html("https://www.bcb.gov.br/controleinflacao/historicometas")
html.table <- html %>% html_nodes("table")
dados <- html.table[[1]] %>% html_table()
View(html)
xml_child(html, 2)
dados <- html.table[[1]] %>% html_table()
dados <- html.table[[2]] %>% html_table()
dados <- html.table[[]] %>% html_table()
dados <- html.table[[0]] %>% html_table()
dados <- html.table[[1]] %>% html_table()
html.table <- html %>% html_nodes("table")
dados <- html.table[[1]] %>% html_table()
View(html.table)
html.table
View(inflacao)
knitr::opts_chunk$set(echo = TRUE)
# dependências
library(tidyverse)
library(readxl)
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base+base*cumsum(n_i))
sum(inflacao$Inflação)
inflacao <- inflacao %>% filter(Mes == "01", Ano >= "2001")
inflacao <- inflacao %>% filter(Mes == "01", Ano > "2001")
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base+base*cumsum(n_i))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = sumsum(base*cumsum(n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = sumsum(base*cumsum(n_i))))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = cumsum(base*cumsum(n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base+cumsum(cumsum(n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base+cumsum(1+cumsum(n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = base+cumsum(cumsum(1+n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = 1+(Inflação/100),
`SM acumulado` = base+cumsum(cumsum(n_i)))
`SM acumulado` = base+(cumsum(n_i))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = 1+(Inflação/100),
`SM acumulado` = base+(cumsum(n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = 1+(Inflação/100),
`SM acumulado` = base+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i =(Inflação/100),
`SM acumulado` = base+(cumsum(base*n_i)))
View(inflacao)
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = lag(base,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = lag(base,-1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = lag(base,n = -1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- read_xls("série_inflação.xls")
names(inflacao)[] <- c("Data", "Inflação")
inflacao$Ano <- substr(inflacao$Data, 1, 4)
inflacao$Mes <- substr(inflacao$Data, 6, 7)
inflacao <- inflacao %>% filter(Mes == "01")
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate(base = sum(sm[,2]),
n_i = (Inflação/100),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate(base = cumsum(sm[,2]),
n_i = (Inflação/100),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate(base = sm[1,2],
n_i = (Inflação/100),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate( n_i = (Inflação/100),
base = cumsum(sm[1,2]*n_i),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = sm[1,2]*cumsum(n_i),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = cumsum(sm[1,2]*cumsum(n_i)))
inflacao <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = cumsum(n_i))
```{r}
inflacao <- read_xls("série_inflação.xls")
names(inflacao)[] <- c("Data", "Inflação")
inflacao$Ano <- substr(inflacao$Data, 1, 4)
inflacao$Mes <- substr(inflacao$Data, 6, 7)
inflacao <- inflacao %>% filter(Mes == "01")
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = cumsum(sm[1,2]*cumsum(n_i)),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
View(inflacao2)
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = cumsum(sm[1,2]*n_i),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+(cumsum(base*n_i)))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+base))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = lag(base,n = 1,order_by = Ano)+base)
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = 195+base)
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = 195+base)
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = n_i*195+base)
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = n_i*base)
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = 195cumsum(Inflação/100),
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = 195+cumsum(Inflação/100),
`SM acumulado` = n_i*base)
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = 195*cumsum(Inflação/100),
`SM acumulado` = n_i*base)
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = 195+195*cumsum(Inflação/100),
`SM acumulado` = n_i*base)
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = 195+195*cumsum(Inflação/100),
`SM acumulado` = n_i*lag(base,1,Ano))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = 195+195*cumsum(Inflação/100),
`SM acumulado` = n_i*lag(base,1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação/100),
base = 195+195*cumsum(Inflação/100),
`SM acumulado` = base*lag(n_i,1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação)/100,
base = 195+195*cumsum(Inflação/100),
`SM acumulado` = base*lag(n_i,1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação)/100,
base = 195+195*cumsum(n_i),
`SM acumulado` = base*lag(n_i,1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação)/100,
base = 195+195*cumsum(n_i),
`SM acumulado` = base*lag((n_i+1),1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação)/100,
base = 195+195*cumsum(n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação)/100,
base = 195+195*cumsum(n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação)/100,
base = 195+cumsum(195)*cumsum(n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação)/100,
base = cumsum(195)*cumsum(n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação)/100,
base = cumsum(195)*cumsum(195*n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação)/100,
base = cumsum(195+195*n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação)/100,
base = 195+cumsum(195*n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (Inflação)/100,
base = 195*n_i,
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (1+Inflação)/100,
base = 195*n_i,
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (100+Inflação)/100,
base = 195*n_i,
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (100+Inflação)/100,
base = cumsum(195*n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (100+Inflação)/100,
base = 195*cumsum(n_i),
`SM acumulado` = base*(n_i+1))
inflacao2 <- inflacao %>%
mutate( n_i = (100+Inflação)/100,
base = cumsum(195*n_i),
`SM acumulado` = base*(n_i))
inflacao2 <- inflacao %>%
mutate( n_i = cumsum(100+Inflação)/100,
base = cumsum(195*n_i),
`SM acumulado` = base*(n_i))
inflacao2 <- inflacao %>%
mutate( n_i = cumsum(100+Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = base*(n_i))
inflacao2 <- inflacao %>%
mutate( n_i = cumsum((100+Inflação)/100),
base = cumsum(195*n_i),
`SM acumulado` = base*(n_i))
inflacao2 <- inflacao %>%
mutate( n_i = cumsum(Inflação/100),
base = cumsum(195*n_i),
`SM acumulado` = base*(n_i))
inflacao2 <- inflacao %>%
mutate(n_i = (1+Inflação)/100,
base = 195,
sm2 = lag(cumsum(n_i*base), 1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate(n_i = (1+Inflação)/100,
base = 195,
sm2 = cumsum(n_i*base)+lag(cumsum(n_i*base), 1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate(n_i = (1+Inflação)/100,
base = 195,
sm2 = base+lag(cumsum(n_i*base), 1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate(n_i = (1+Inflação)/100,
base = 195,
sm2 = lag(cumsum(n_i*base), 1,order_by = Ano))
knitr::opts_chunk$set(echo = TRUE)
# dependências
library(tidyverse)
library(readxl)
inflacao2 <- inflacao %>%
mutate(n_i = (1+Inflação)/100,
base = 195,
sm2 = lag(cumsum(n_i*base), 1,order_by = Ano))
# leitura
sm <- read_xls("série_sm.xls")
# altera o nome
names(sm)[] <- c("Data", "Salário")
# variável ano
sm$Ano <- substr(sm$Data, 1, 4)
# filtrando os dados
sm <- sm %>%
filter(Ano >= 2002) %>%
group_by(Ano) %>%
summarise(SM = mean(Salário, na.rm = T))
inflacao <- read_xls("série_inflação.xls")
names(inflacao)[] <- c("Data", "Inflação")
inflacao$Ano <- substr(inflacao$Data, 1, 4)
inflacao$Mes <- substr(inflacao$Data, 6, 7)
inflacao <- inflacao %>% filter(Mes == "01")
inflacao2 <- inflacao %>%
mutate(n_i = (1+Inflação)/100,
base = 195,
sm2 = lag(cumsum(n_i*base), 1,order_by = Ano))
View(inflacao)
inflacao2 <- inflacao %>%
mutate(n_i = (1+Inflação)/100,
base = 195,
sm2 = lag(cumsum(n_i*base), 1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = lag(cumsum(n_i*base), 1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = lag(cumprod(n_i*195), 1,order_by = Ano))
inflacao2 <- inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = (cumprod(n_i*195), 1,order_by = Ano))
sm2 = (cumprod(n_i*195))
inflacao2 <- inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumprod(n_i*195))
inflacao2 <- inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(n_i*195))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(n_i*195))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = 195*cumsum(n_i))
library(writexl)
write_xlsx(c(inflacao,sm), c("inf.xlsx", "sm.xlsx"))
write_xlsx(inflacao, "inf.xlsx")
write_xlsx(sm, "sm.xlsx")
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(cumsum(195*n_i)*n_i))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(cumsum(195*n_i)*Inflação/100))
knitr::opts_chunk$set(echo = TRUE)
# dependências
library(tidyverse)
library(readxl)
library(writexl)
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195*n_i))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195/n_i))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(n_i/195))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195/n_i))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195/lag(n_i,1,order_by = Ano)))
inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = lag(cumsum(195/lag(n_i,1,order_by = Ano)),1,order_by = Ano))
inflacao 2 = inflacao %>%
inflacao2 = inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = lag(cumsum(195/lag(n_i,1,order_by = Ano)),1,order_by = Ano))
inflacao2 = inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195*lag(n_i,1,order_by = Ano)))
inflacao2 = inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195*lag(n_i,1,order_by = Ano)))
inflacao2 = inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195*lag(n_i,-1,order_by = Ano)))
inflacao2 = inflacao %>%
mutate(n_i = (100+Inflação)/100,
base = 195,
sm2 = cumsum(195*lag(n_i,1,order_by = Ano)))
inflacao2 = inflacao %>%
mutate(n_i = 1+cumsum(Inflação/100),
base = 195,
sm2 = (195*lag(n_i,1,order_by = Ano)))
inflacao2 = inflacao %>%
mutate(n_i = 1+cumsum(Inflação/100),
base = 195,
sm2 = cumsum(195*lag(n_i,1,order_by = Ano)))
inflacao2 = inflacao %>%
mutate(n_i = 1+cumsum(Inflação/100),
base = 195,
sm2 = cumsum(195*n_i))
# statement
print(Ano)
inflacao %>%
while (Ano < "2022")
inflacao %>%
while (Ano < "2022")
inflacao %>%
while (inflacao$Ano < "2022")
while (inflacao$Ano < "2022")
while (inflacao$Ano < "2022")
# statement
print(Ano)
while (inflacao$Ano < "2022"){
# statement
print(Ano)
}
inflacao %>%
while (inflacao$Ano < "2022"){
# statement
print(Ano)
}
Ano = paste(Ano, "a", "-")
inflacao %>%
while (inflacao$Ano < "2022"){
# statement
print(Ano)
Ano = paste(Ano, "a", "-")
}
knitr::opts_chunk$set(echo = TRUE)
# dependências
library(tidyverse)
library(readxl)
library(writexl)
library(rvest)
rvest::html_text("https://www.gov.br/anp/pt-br/centrais-de-conteudo/dados-abertos/arquivos/shpc/dsas/ca/ca-2020-01.csv")
a = rvest::html_text("https://www.gov.br/anp/pt-br/centrais-de-conteudo/dados-abertos/arquivos/shpc/dsas/ca/ca-2020-01.csv")
a = rvest::html_attr("https://www.gov.br/anp/pt-br/centrais-de-conteudo/dados-abertos/arquivos/shpc/dsas/ca/ca-2020-01.csv")
url_base <- "https://www.gov.br/anp/pt-br/centrais-de-conteudo/dados-abertos/arquivos/shpc/dsas/ca/ca-2020-01.csv"
a = read.csv2(url_base , sep=”,” , dec=”.”)
library(readr)
a = read.csv2(url_base , sep="," , dec=".")
a = read.csv2(url_base, sep=",", dec=".")
a = read_csv2(url_base, sep=",", dec=".")
a = read_csv(url_base, sep=",", dec=".")
a = read_csv(url_base)
View(sm)
